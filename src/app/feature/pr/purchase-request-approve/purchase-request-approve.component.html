<app-menu></app-menu>
<div class='component-content'>
    <div class='lefhalf'>
        <span class="component-title">[PurchaseRequest Approve/Reject] | </span>
        <span><a routerLink='/pr/review' title='Back to PurchaseRequest Review List'>Back to List</a></span>
    </div>
</div>

<p *ngIf='!purchaseRequest'>Loading...</p>
<table class="table table-sm" *ngIf='purchaseRequest'>
    <tr>
        <th class="table-secondary btn-link"><a class="btn btn-link font-weight-bold" (click)="sortBy(id)"><u>Id</u></a>
        </th>
        <th class="table-secondary btn-link"><a class="btn btn-link font-weight-bold"><u>Description</u></a></th>
        <th class="table-secondary btn-link"><a class="btn btn-link font-weight-bold"><u>Status</u></a></th>
        <th class="table-secondary btn-link"><a class="btn btn-link font-weight-bold"><u>Total</u></a></th>
    </tr>
    <tr>
        <td>{{purchaseRequest.id}}</td>
        <td>{{purchaseRequest.description}}</td>
        <td>{{purchaseRequest.status}}</td>
        <td>{{purchaseRequest.total | currency}}</td>
    </tr>
</table>
<p></p>
<table *ngIf='prlis' class="table table-sm">
    <tr>
        <span>[Lines]</span>
    </tr>
    <tr>
        <th class="table-secondary btn-link"><a class="btn btn-link font-weight-bold"><u>Id</u></a></th>
        <th class="table-secondary btn-link"><a class="btn btn-link font-weight-bold"><u>Product</u></a></th>
        <th class="table-secondary btn-link"><a class="btn btn-link font-weight-bold"><u>Quantity</u></a></th>
        <th class="table-secondary btn-link"><a class="btn btn-link font-weight-bold"><u>Price</u></a></th>
        <th class="table-secondary btn-link"><a class="btn btn-link font-weight-bold"><u>Line Total</u></a></th>

    </tr>
    <tr *ngFor="let prli of prlis">
        <td>{{prli.id}}</td>
        <td>{{prli.product.name}}</td>
        <td>{{prli.quantity}}</td>
        <td>{{prli.product.price | currency}}</td>
        <td>{{prli.product.price * prli.quantity | currency}}</td>
    </tr>
</table>

<div *ngIf='purchaseRequest' class="form-group row">
    <div *ngIf="purchaseRequest.reasonForRejection == ''" class="col-1"><button (click)='approve()' class='btn btn-primary'>Approve</button></div>
    <div *ngIf="purchaseRequest.reasonForRejection != ''" class="col-1"><button (click)='reject()' class='btn btn-danger'>Reject</button></div>
    <div class="col-6"><input [(ngModel)]='purchaseRequest.reasonForRejection' name='ReasonForRejection' type="text" class="form-control col-sm-6" placeholder="Reason for Rejection"></div>
</div>